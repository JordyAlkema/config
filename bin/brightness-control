#!/usr/bin/env bash

max=1060
file=/sys/class/backlight/intel_backlight/brightness

function up() {
    echo $(( $(cat $file) + 106 )) | sudo tee $file
}

function down() {
    echo $(( $(cat $file) - 106 )) | sudo tee $file
}

function print_brightness() {
    cur=$(cat $file)
    echo $(( $cur*100/$max ))%
}

function monitor() {
    print_brightness
    inotifywait -q -m -e modify $file |
        while read p _ f; do
            print_brightness
        done
}

case "$1" in
    --up)
        up
        ;;
    --down)
        down
        ;;
    *)
        monitor
        ;;
esac
