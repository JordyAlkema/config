#!/usr/bin/env bash

stack=$(mktemp)

push() {
    echo "$@" >>$stack
}

pop() {
    tmp=$(mktemp)
    bspc node $(<$stack tail -n1) -g hidden=off
    head -n-1 $stack >$tmp
    mv $tmp $stack
}

case $1 in
    push)
        if [ -n $2 ]; then
            push $2;
        else
            push $(bspc query -N -n)
        fi
        ;;
    pop) pop ;;
    *) exit 1 ;;
esac
