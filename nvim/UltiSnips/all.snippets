global !p
from vimsnippets import foldmarker, make_box, get_comment_format
endglobal

snippet bbox "A nice box over the full width" b
`!p
if not snip.c:
	width = 80
box = make_box(len(t[1]), width)
snip.rv = box[0]
snip += box[1]
`${1:${VISUAL:content}}`!p
box = make_box(len(t[1]), width)
snip.rv = box[2]
snip += box[3]`$0
endsnippet
